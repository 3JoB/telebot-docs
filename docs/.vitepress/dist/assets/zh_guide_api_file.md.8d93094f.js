import{_ as s,c as a,o as n,Q as l}from"./chunks/framework.31184730.js";const h=JSON.parse('{"title":"文件","description":"","frontmatter":{"title":"文件","layout":"doc"},"headers":[],"relativePath":"zh/guide/api/file.md","filePath":"zh/guide/api/file.md","lastUpdated":null}'),p={name:"zh/guide/api/file.md"},e=l(`<h1 id="文件" tabindex="-1">文件 <a class="header-anchor" href="#文件" aria-label="Permalink to &quot;文件&quot;">​</a></h1><p><strong>文件的下载方法目前仍然处于一个混乱的状态。</strong></p><blockquote><p>BotAPI仅允许下载最大50MB和上传20MB的文件。</p><p>虽然可以使用自定义BotAPI服务器来解除这一限制，但我并不推荐，如果你要从BotAPI外部访问文件的话。</p></blockquote><p>Telebot允许上传(从磁盘或通过URL)和下载(从Telegram) 机器人范围内的文件。此外，发送任何类型的媒体并创建的文件会自动将文件从磁盘上传到Telegram。</p><h3 id="上传" tabindex="-1">上传 <a class="header-anchor" href="#上传" aria-label="Permalink to &quot;上传&quot;">​</a></h3><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">a </span><span style="color:#F97583;">:=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">&amp;</span><span style="color:#E1E4E8;">tele.Audio{File: tele.</span><span style="color:#79B8FF;">FromDisk</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;file.ogg&quot;</span><span style="color:#E1E4E8;">)}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">fmt.</span><span style="color:#79B8FF;">Println</span><span style="color:#E1E4E8;">(a.</span><span style="color:#79B8FF;">OnDisk</span><span style="color:#E1E4E8;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">fmt.</span><span style="color:#79B8FF;">Println</span><span style="color:#E1E4E8;">(a.</span><span style="color:#79B8FF;">InCloud</span><span style="color:#E1E4E8;">()) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Will upload the file from disk and send it to the recipient</span></span>
<span class="line"><span style="color:#E1E4E8;">b.</span><span style="color:#79B8FF;">Send</span><span style="color:#E1E4E8;">(recipient, a)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Next time you&#39;ll be sending this very *Audio, Telebot won&#39;t</span></span>
<span class="line"><span style="color:#6A737D;">// re-upload the same file but rather utilize its Telegram FileID</span></span>
<span class="line"><span style="color:#E1E4E8;">b.</span><span style="color:#79B8FF;">Send</span><span style="color:#E1E4E8;">(otherRecipient, a)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">fmt.</span><span style="color:#79B8FF;">Println</span><span style="color:#E1E4E8;">(a.</span><span style="color:#79B8FF;">OnDisk</span><span style="color:#E1E4E8;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">fmt.</span><span style="color:#79B8FF;">Println</span><span style="color:#E1E4E8;">(a.</span><span style="color:#79B8FF;">InCloud</span><span style="color:#E1E4E8;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#E1E4E8;">fmt.</span><span style="color:#79B8FF;">Println</span><span style="color:#E1E4E8;">(a.FileID) </span><span style="color:#6A737D;">// &lt;Telegram file ID&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">a </span><span style="color:#D73A49;">:=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">&amp;</span><span style="color:#24292E;">tele.Audio{File: tele.</span><span style="color:#005CC5;">FromDisk</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;file.ogg&quot;</span><span style="color:#24292E;">)}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(a.</span><span style="color:#005CC5;">OnDisk</span><span style="color:#24292E;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(a.</span><span style="color:#005CC5;">InCloud</span><span style="color:#24292E;">()) </span><span style="color:#6A737D;">// false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Will upload the file from disk and send it to the recipient</span></span>
<span class="line"><span style="color:#24292E;">b.</span><span style="color:#005CC5;">Send</span><span style="color:#24292E;">(recipient, a)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;">// Next time you&#39;ll be sending this very *Audio, Telebot won&#39;t</span></span>
<span class="line"><span style="color:#6A737D;">// re-upload the same file but rather utilize its Telegram FileID</span></span>
<span class="line"><span style="color:#24292E;">b.</span><span style="color:#005CC5;">Send</span><span style="color:#24292E;">(otherRecipient, a)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(a.</span><span style="color:#005CC5;">OnDisk</span><span style="color:#24292E;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(a.</span><span style="color:#005CC5;">InCloud</span><span style="color:#24292E;">()) </span><span style="color:#6A737D;">// true</span></span>
<span class="line"><span style="color:#24292E;">fmt.</span><span style="color:#005CC5;">Println</span><span style="color:#24292E;">(a.FileID) </span><span style="color:#6A737D;">// &lt;Telegram file ID&gt;</span></span></code></pre></div><h3 id="下载" tabindex="-1">下载 <a class="header-anchor" href="#下载" aria-label="Permalink to &quot;下载&quot;">​</a></h3><p>目前下载方法会直接将文件保留到系统缓存目录并在所指定的位置创建一个软链接，这是受限于糟糕的io.Reader接口而创建的糟糕的方法，会在将来更改行为。</p><div class="language-go vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">b.</span><span style="color:#79B8FF;">Download</span><span style="color:#E1E4E8;">(c.</span><span style="color:#79B8FF;">Message</span><span style="color:#E1E4E8;">().Document, </span><span style="color:#9ECBFF;">&quot;doc.txt&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">b.</span><span style="color:#005CC5;">Download</span><span style="color:#24292E;">(c.</span><span style="color:#005CC5;">Message</span><span style="color:#24292E;">().Document, </span><span style="color:#032F62;">&quot;doc.txt&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div>`,9),o=[e];function t(c,r,i,y,E,d){return n(),a("div",null,o)}const F=s(p,[["render",t]]);export{h as __pageData,F as default};
